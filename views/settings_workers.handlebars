{{> settings_header }}

<div class="settings-content">
<form class="form-horizontal" method="post" action=''>
    <div class="form-controls">
        {{#each workers}}
        <div class="form-group">
            <label class="control-label col-sm-2" for="name">{{{../__ 'Name'}}}</label>
            <div class="col-sm-8">
                <input class="form-control" type="text" name="name" placeholder="{{{../__ 'Name'}}}" value="{{this}}">
            </div>
            {{#if @first}}
            <button class="btn btn-default btn-add">
                <i class="glyphicon glyphicon-plus"></i>
            </button>
            {{else}}
            <button class="btn btn-default btn-remove">
                <i class="glyphicon glyphicon-minus"></i>
            </button>
            {{/if}}
        </div>
        {{/each}}
    </div>

    <input type='hidden' name="_csrf" value="{{csrftoken}}">
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-primary" name="submit">Submit</button>
        </div>
    </div>
    <script>
        function removeHandler(event) {
            event.preventDefault();
            event.stopPropagation();
            $(this).parents('.form-group:first').remove();
        }

        $(document).ready(function() {
            $('.btn-add').on('click', function(event) {
                event.preventDefault();
                var form = $('.form-controls');
                var newEntry = $(this).parents('.form-group:first').clone().appendTo(form);
                newEntry.find('input').val('');
                newEntry.find('.btn-add').removeClass('btn-add').addClass('btn-remove').html(
                    '<i class="glyphicon glyphicon-minus"></i>'
                ).on('click', removeHandler);
            });
            $('.btn-remove').on('click', removeHandler);
        })
    </script>
</form>
</div>