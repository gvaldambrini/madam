{{> customer_header }}

<div class="appointments-content">

    {{> form_errors}}

    <form id="form" class="form-horizontal" method="post">
        {{> input_date name='date' label=i18n.date}}
        {{#each services}}
        <div class="form-group">
          <div class="col-sm-12">
            <div class="input-group">
              <span class="input-group-addon">
                <input type="checkbox" name="enabled" value="{{@index}}" {{#this.checked}}checked{{/this.checked}}>
              </span>
              <input type="text" class="form-control" value="{{this.description}}" name="service">
              <div class="input-group-btn">
                <button type="button" class="btn btn-default btn-click" style="color:{{this.worker.color}}">{{this.worker.name}}</button>
                <input type="hidden" name="worker" value="{{this.worker.name}}">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" role="menu">
                    {{#each ../workers}}
                    <li><a style="color:{{this.color}}" href="#">{{this.name}}</a></li>
                    {{/each}}
                </ul>
              </div>
            </div>
          </div>
        </div>
        {{/each}}

        <input type='hidden' name="_csrf" value="{{csrftoken}}">
        <div class="form-group">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-primary" name="submit">Submit</button>
            </div>
        </div>
    </form>
</div>
<script type='text/javascript'>
    var dateFormat = "{{config.date_format}}".toLowerCase();
    var language = '{{config.language}}';
    var date = '{{date}}';
    $(document).ready(Appointment.init(language, date, dateFormat));
</script>
